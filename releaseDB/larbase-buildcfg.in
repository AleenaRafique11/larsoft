# build everything except larsoft itself

basequal=${1}

build_bundle nu-@NUDIST_DOT_VERSION@ ${basequal}
status=$?
if (( ${status} != 0)); then
  cat 1>&2 <<EOF
Build of nu-@NUDIST_DOT_VERSION@ bundle failed with status ${status}
EOF
  return ${status}
fi

# extra cmake for pandora build
do_build cmake v3_9_0
do_build marley @MARLEY_VERSION@ ${basequal}
do_build pandora @PANDORA_VERSION@ ${basequal}:nu
prep_build -f NULL range @RANGE_VERSION@; add_to_manifest
prep_build -f NULL eigen @EIGEN_VERSION@; add_to_manifest
do_build jsoncpp @JSONCPP_VERSION@ ${basequal}
do_build wirecell @WIRECELL_VERSION@ ${basequal}

# add to manifest if no build - larsoft_data, mrb
prep_build -f NULL ifdhc_config @IFDHC_CONFIG_VERSION@; add_to_manifest
prep_build -f NULL genie_xsec @GENIE_XSEC_VERSION@ effspec-tem; add_to_manifest
prep_build -f NULL larsoft_data @LARSOFT_DATA_VERSION@; add_to_manifest
prep_build -f NULL gitflow @GITFLOW_VERSION@; add_to_manifest
prep_build -f NULL mrb @MRB_VERSION@; add_to_manifest

return 0
